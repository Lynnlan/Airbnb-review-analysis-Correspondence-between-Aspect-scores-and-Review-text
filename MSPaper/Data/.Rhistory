abnb_homes_reviews
glimpse(abnb_homes_reviews)
View(reviews)
View(abnb_homes)
setwd("/Users/ltl/Desktop/2019-Spring/MSPaper/Data")
library(tidyverse)
# Reviews data
reviews <- as.tibble(read.csv("./reviews.csv"))
# Airbnb homes data
abnb_homes <- as.tibble(read.csv("./listings.csv"))
abnb_homes$number_of_reviews
# Remove NA data
reviews <- na.omit(reviews)
reviews$id <- factor(reviews$id)
reviews$listing_id <- factor(reviews$listing_id)
# Select required data columns
abnb_homes <- select(abnb_homes,
id,
property_type,
room_type,
price,
number_of_reviews,
review_scores_rating,
review_scores_accuracy,
review_scores_cleanliness,
review_scores_checkin,
review_scores_communication,
review_scores_location,
review_scores_value)
# Format to suitable data type
abnb_homes$id <- factor(abnb_homes$id)
abnb_homes <- abnb_homes %>% rename(id = listing_id)
# Remove NA data
abnb_homes <- na.omit(abnb_homes)
abnb_homes_reviews <- abnb_homes %>% left_join(reviews, by = c( "id" = "listing_id" ))
abnb_homes <- abnb_homes %>% rename(listing_id = id)
abnb_homes_reviews <- abnb_homes %>% left_join(reviews, by = "listing_id")
View(abnb_homes_reviews)
setwd("/Users/ltl/Desktop/2019-Spring/MSPaper/Data")
library(tidyverse)
# Reviews data
reviews <- as.tibble(read.csv("./reviews.csv"))
# Airbnb homes data
abnb_homes <- as.tibble(read.csv("./listings.csv"))
abnb_homes$number_of_reviews
# Remove NA data
reviews <- na.omit(reviews) %>% rename(review_id = id)
reviews$id <- factor(reviews$id)
reviews$listing_id <- factor(reviews$listing_id)
# Select required data columns
abnb_homes <- select(abnb_homes,
id,
property_type,
room_type,
price,
number_of_reviews,
review_scores_rating,
review_scores_accuracy,
review_scores_cleanliness,
review_scores_checkin,
review_scores_communication,
review_scores_location,
review_scores_value)
# Format to suitable data type
abnb_homes$id <- factor(abnb_homes$id)
abnb_homes <- abnb_homes %>% rename(listing_id = id)
# Remove NA data
abnb_homes <- na.omit(abnb_homes)
abnb_homes_reviews <- abnb_homes %>% left_join(reviews, by = "listing_id")
abnb_homes %>%
ggplot(aes(x = listing_id, y = number_of_reviews)) %>%
geom_bar()
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews)) %>%
geom_bar()
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews)) +
geom_bar()
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews))
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews)) +
geom_point()
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews)) +
# geom_point() +
geom_area()
abnb_homes %>%
ggplot(mapping = aes(x = listing_id, y = number_of_reviews)) +
# geom_point() +
geom_histogram(breaks = seq(min(number_of_reviews)-0.5, max(number_of_reviews)+0.5, by = 1))
?geom_histogram
abnb_homes %>%
ggplot(x = number_of_reviews) +
geom_histogram(
breaks = seq(min(number_of_reviews) - 0.5,
max(number_of_reviews) + 0.5,
by = 1)
)
abnb_homes %>%
ggplot(x = number_of_reviews) +
geom_histogram(
breaks = seq(min(x) - 0.5,
max(x) + 0.5,
by = 1)
)
abnb_homes %>%
ggplot(x = number_of_reviews) +
geom_histogram(
breaks = seq(min(abnb_homes$number_of_reviews) - 0.5,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
abnb_homes %>%
ggplot() +
geom_histogram(
x = number_of_reviews,
breaks = seq(min(abnb_homes$number_of_reviews) - 0.5,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1),
binwidth = 2
)
abnb_homes %>%
ggplot() +
geom_histogram(
x = abnb_homes$number_of_reviews,
breaks = seq(min(abnb_homes$number_of_reviews) - 0.5,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1),
binwidth = 2
)
?stat_bin
diamonds
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_freqpoly()
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_freqpoly(breaks = seq(min(number_of_reviews)-0.5, max(number_of_reviews)+0.5, by=1))
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$number_of_reviews) - 0.5,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_freqpoly(
breaks = seq(20,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
min(abnb_homes$number_of_reviews) - 0.5
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_histogram(
breaks = seq(min(abnb_homes$number_of_reviews) - 0.5,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_histogram(
breaks = seq(20,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(number_of_reviews)) +
geom_histogram(
breaks = seq(50,
max(abnb_homes$number_of_reviews) + 0.5,
by = 1)
)
glimpse(abnb_homes)
library(readr)
parse_number(abnb_homes$price)
?as.numeric
as.numeric("$85.00")
as.numeric(sub("$", x))
as.numeric(sub("$", "$85.00"))
x = "$85.00"
as.numeric(sub("$", "$85.00"))
as.numeric(sub("$", x))
x
x <- "$85.00"
x
as.numeric(sub("$", x))
as.numeric(gsub("$", '', x))
as.numeric(gsub(' $', '', x))
stringr::str_extract("$85.00", "\d+")
stringr::str_extract("$85.00", "\\d+")
abnb_homes$price <- stringr::str_extract(abnb_homes$price, "\\d+")
glimpse(abnb_homes)
abnb_homes$price <- tointeger(abnb_homes$price)
abnb_homes$price <- as.integer(abnb_homes$price)
glimpse(abnb_homes)
ggplot(abnb_homes, aes(price)) +
geom_histogram(
breaks = seq(50,
max(abnb_homes$price) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
)
abnb_homes.price
abnb_homes$price
sort(abnb_homes$price)
ggplot(abnb_homes, aes(sort(price))) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_abline()
?geom_hline
avg(abnb_homes$price)
mean(abnb_homes$price)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = mean(abnb_homes$price))
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)))
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)),
color = 'red')
median(abnb_homes$price)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(abnb_homes$price)),
color = 'blue')
sample1_price <- abnb_homes$price[abnb_homes$price <= 250]
sample1_price
ggplot(aes(sample1_price)) +
geom_freqpoly(
breaks = seq(min(sample1_price) - 0.5,
max(sample1_price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(sample1_price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(sample1_price)),
color = 'blue')
ggplot(sample1_price) +
geom_freqpoly(
breaks = seq(min(sample1_price) - 0.5,
max(sample1_price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(sample1_price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(sample1_price)),
color = 'blue')
count(sample1_price)
abnb_homes %>%
filter(price <= 250) %>%
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(abnb_homes$price)),
color = 'blue')
abnb_homes %>%
filter(price <= 250) %>%
ggplot(aes(price)) +
geom_freqpoly(
breaks = seq(min(price) - 0.5,
max(price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(abnb_homes$price)),
color = 'blue')
sample1 <- abnb_homes %>% filter(price <= 250)
sample1
sample1_homes <- abnb_homes %>% filter(price <= 250)
ggplot(sample1_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(sample1_homes$price) - 0.5,
max(sample1_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(sample1_homes$price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(sample1_homes$price)),
color = 'blue')
ggplot(abnb_homes_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes_homes$price) - 0.5,
max(abnb_homes_homes$price) + 0.5,
by = 1)
)
abnb_homes %>% group_by(price)
abnb_homes %>% group_by(price) %>% count()
abnb_homes %>%
group_by(price) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area()
abnb_homes %>%
group_by(price) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = mean(n))
abnb_homes %>%
group_by(price) %>%
filter(price <= 500) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area()
abnb_homes %>%
group_by(price) %>%
filter(price <= 300) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area()
abnb_homes %>%
group_by(price) %>%
filter(price <= 300 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area()
abnb_homes %>%
group_by(price) %>%
filter(price <= 300 && price >= 25) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area()
abnb_homes %>%
group_by(price) %>%
filter(price <= 300 && price >= 25) %>%
count() %>%
ggplot(aes(price, n)) +
geom_histogram(bins = 10)
abnb_homes %>%
group_by(price) %>%
filter(price <= 300 && price >= 25) %>%
count() %>%
ggplot(aes(price, n)) +
geom_histogram(
breaks = seq(25,
300,
by = 50)
)
abnb_homes %>%
group_by(price) %>%
filter(price <= 300 && price >= 25) %>%
count() %>%
ggplot(aes(price, n)) +
geom_histogram(
stat = "identity",
breaks = seq(25,
300,
by = 50)
)
ggplot(abnb_homes, aes(price)) +
geom_freqpoly(
breaks = seq(min(abnb_homes$price) - 0.5,
max(abnb_homes$price) + 0.5,
by = 1)
) +
geom_vline(xintercept = as.integer(mean(abnb_homes$price)),
color = 'red') +
geom_vline(xintercept = as.integer(median(abnb_homes$price)),
color = 'blue')
abnb_homes %>%
group_by(price) %>%
filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 50)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 50)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = min(n))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = min(n()))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 25)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= 25)
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 25)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= 25) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 25)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= mean(n)) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = 25)
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= mean(n)) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = mean(n))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= mean(n)) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = as.integer(mean(n)))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= mean(n)) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = mean(na.rm(n)))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
filter(n >= mean(n)) %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = mean(na.omit(n)))
abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
ggplot(aes(price, n)) +
geom_area() +
geom_hline(yintercept = mean(na.omit(n)))
a <- abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count() %>%
qq
a <- abnb_homes %>%
group_by(price) %>%
#filter(price <= 200 && price >= 75) %>%
count()
a
a$n
mean(a$n)
median(a$n)
